{"version":3,"sources":["components/Note.js","components/Notification.js","services/notes.js","App.js","index.js"],"names":["Note","_ref","note","toggleImportance","label","important","react_default","a","createElement","onClick","content","Notification","message","className","notes","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","concat","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addNote","event","preventDefault","noteObject","state","newNote","date","Date","toISOString","Math","random","noteService","setState","toggleImportanceOf","console","log","find","n","changedNote","objectSpread","filter","catch","error","setTimeout","handleNoteChange","target","value","toggleVisible","showAll","_this2","_this3","notesToShow","components_Notification","map","components_Note","key","onSubmit","onChange","type","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.7d7b814e.chunk.js","sourcesContent":["import React from 'react'\n\nconst Note = ({ note, toggleImportance }) => {\n  const label = note.important ? 'Make not important' : 'Make important'\n  return (\n    <li><button onClick={toggleImportance}>{label}</button>{note.content} </li>\n  )\n}\n\nexport default Note","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import axios from 'axios'\n\nconst baseURL = '/notes'\n\nconst getAll = () => {\n  return axios.get(baseURL).then(response => response.data)\n}\n\nconst create = (newObject) => {\n  return axios.post(baseURL, newObject).then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseURL}/${id}`, newObject).then(response => response.data)\n}\n\nexport default {\n  getAll,\n  create,\n  update\n}","import React from 'react';\nimport Note from './components/Note'\nimport Notication from './components/Notification'\nimport noteService from './services/notes'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n\n    /* NOTE: initializing the state of a component with values delivered as props is not necessarily a good practice,\n    many developers even consider it an antipattern. However, if we delve into this topic more deeply,\n    we can see that this problem will usually arise if the value of the props can change.\n    This is not the case in our application, so we can initialize the state using props. */\n    this.state = {\n      notes: [],\n      newNote: '',\n      showAll: true,\n      error: null\n    }\n    console.log('constructor')\n  }\n\n  componentDidMount() {\n    console.log('Did mount')\n    noteService\n      .getAll()\n      .then(response => {\n\n        console.log('Promise fulfilled')\n        this.setState({ notes: response })\n      })\n  }\n\n  addNote = (event) => {\n    event.preventDefault()\n    const noteObject = {\n      content: this.state.newNote,\n      date: new Date().toISOString(),\n      important: Math.random() > 0.5\n      // The task of generating an id is left to the server\n      // id: this.state.notes.length + 1\n    }\n\n    noteService\n      .create(noteObject)\n      .then(newNote => {\n        this.setState({\n          notes: this.state.notes.concat(newNote),\n          newNote: ''\n        })\n      })\n\n    /* The method concat does not change the original array this.state.notes.\n    Instead, it creates a new array, which includes the new element along with the old ones.\n    This is important, because the state should never be mutated directly in React! */\n  }\n\n  /* This method toggleImportanceOf is not an event handler itself.\n  Instead, it is a factory that creates an event handler for each note. */\n  toggleImportanceOf = (id) => {\n    return () => {\n      // Use ES6's template string feature to write the string:\n      console.log(`importance of ${id} needs to be toggled`)\n\n      // The array method find is used to find the note that will be changed\n      // and a reference to the note is stored in the variable note.\n      const note = this.state.notes.find(n => n.id === id)\n      const changedNote = { ...note, important: !note.important } // Applying the object spread operation\n\n      // We could have created the new object using an older command Object.assign\n      // const changedNote = Object.assign({}, note, {important: !note.important} }\n\n      // A new note is sent to the server using a PUT request and thus it replaces the earlier note\n      noteService\n        .update(id, changedNote)\n        .then(changedNote => {\n          const notes = this.state.notes.filter(n => n.id !== id)\n          this.setState({\n            notes: notes.concat(changedNote)\n          })\n          /* In the callback function, all other notes except the modified one are stored in the App component's state.\n          The modified note returned by the server is then added to the state. */\n        })\n        .catch(error => {\n          // alert(`Unfortunately note '${note.content}' has  already been removed from the server.`)\n          this.setState({\n            error: `Unfortunately note '${note.content}' has  already been removed from the server.`,\n            notes: this.state.notes.filter(n => n.id !== id)\n          })\n          setTimeout(() => {\n            this.setState({ error: null })\n          }, 5000)\n        })\n    }\n  }\n\n  handleNoteChange = (event) => {\n    console.log(event.target.value)\n    this.setState({ newNote: event.target.value })\n  }\n\n  toggleVisible = () => {\n    this.setState({ showAll: !this.state.showAll })\n  }\n\n  render() {\n    console.log('render')\n    const notesToShow =\n      this.state.showAll ?\n        this.state.notes :\n        this.state.notes.filter(note => note.important === true)\n\n    const label = this.state.showAll ? 'only important' : 'all'\n\n    return (\n      <div>\n        <h1>Notes</h1>\n\n        <Notication message={this.state.error} />\n        <div>\n          <button onClick={this.toggleVisible}>Show {label}</button>\n        </div>\n        <ul>\n          {notesToShow.map(note =>\n            <Note\n              key={note.id}\n              note={note}\n              toggleImportance={this.toggleImportanceOf(note.id)}\n            />\n          )}\n        </ul>\n        <form onSubmit={this.addNote}>\n          <input\n            value={this.state.newNote}\n            onChange={this.handleNoteChange}\n          />\n          <button type=\"submit\">Save note</button>\n        </form>\n      </div >\n    )\n  }\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}